---
title: linux_常用命令
date: 2017-08-21 14:28:16
tags:
categories: 
- Linux
desc: Linux基本命令笔记，查看关闭后台执行程序
keyword: Linux基本命令笔记，查看关闭后台执行程序
---

[TOC]

### Linux目录结构

详细结构参考：[http://www.runoob.com/linux/linux-system-contents.html](http://www.runoob.com/linux/linux-system-contents.html)

### 基本命令

- ls
- cat
- man -ls /-d查找命令选项/ 帮助命令
- ln -s 源文件 目标文件
- **mkdir**<!--more-->
  - mkdir -p 一级目录/二级目录
  - cd ~ 家目录
  - cd - 切换到上次目录
  - cd . 当前目录
  - 相对路径：cd ../user/local/src/
  - 绝对路径：cd /etc/
- **查看文件：cat tac more less head tail nl od**
  - cat 查看全部文件
  - nl 显示全部，并且显示行号
  - head 看头几行
  - tail 看尾几行
  - more 翻页查看
  - od 二级制显示文件

### **编辑命令**

编辑命令：vi

vi 文件名
vi orange.txt

保存：：w!
退出：先按esc 然后 ：wq

:word 查找word

| x, X     | 在一行字当中，x 为向后删除一个字符 (相当于 [del] 按键)， X 为向前删除一个字符(相当于 [backspace] 亦即是退格键) (常用) |
| -------- | ---------------------------------------- |
| nx       | n 为数字，连续向后删除 n 个字符。举例来说，我要连续删除 10 个字符， 『10x』。 |
| dd       | 删除游标所在的那一整行(常用)                          |
| ndd      | n 为数字。删除光标所在的向下 n 行，例如 20dd 则是删除 20 行 (常用) |
| d1G      | 删除光标所在到第一行的所有数据                          |
| dG       | 删除光标所在到最后一行的所有数据                         |
| d$       | 删除游标所在处，到该行的最后一个字符                       |
| d0       | 那个是数字的 0 ，删除游标所在处，到该行的最前面一个字符            |
| yy       | 复制游标所在的那一行(常用)                           |
| nyy      | n 为数字。复制光标所在的向下 n 行，例如 20yy 则是复制 20 行(常用) |
| y1G      | 复制游标所在行到第一行的所有数据                         |
| yG       | 复制游标所在行到最后一行的所有数据                        |
| y0       | 复制光标所在的那个字符到该行行首的所有数据                    |
| y$       | 复制光标所在的那个字符到该行行尾的所有数据                    |
| p, P     | p 为将已复制的数据在光标下一行贴上，P 则为贴在游标上一行！ 举例来说，我目前光标在第 20 行，且已经复制了 10 行数据。则按下 p 后， 那 10 行数据会贴在原本的 20 行之后，亦即由 21 行开始贴。但如果是按下 P 呢？ 那么原本的第 20 行会被推到变成 30 行。 (常用) |
| J        | 将光标所在行与下一行的数据结合成同一行                      |
| c        | 重复删除多个数据，例如向下删除 10 行，[ 10cj ]            |
| u        | 复原前一个动作。(常用)                             |
| [Ctrl]+r | 重做上一个动作。(常用)                             |

| :set nu   | 显示行号，设定之后，会在每一行的前缀显示该行的行号 |
| --------- | ------------------------- |
| :set nonu | 与 set nu 相反，为取消行号！        |

参考：[http://www.runoob.com/linux/linux-vim.html](http://www.runoob.com/linux/linux-vim.html)

### **压缩与解压命令**

zip 压缩文件名 源文件

zip -r 压缩文件名 源目录

unzip 解缩文件名

### 查看关闭后台执行程序

- 在命令后面加上一个 `& ` 符号，表示该命令放在后台执行.
- `ctrl + z` 将一个正在前台执行的命令放到后台，并且暂停。
- `jobs` 显示当前shell环境中后台正在运行或者被挂起的任务信息
- `fg %n ` 将后台运行的进程调到前台来运行, N 是jobs 看到的job number
- `bg %n` 将一个在后台暂停运行的命令，变成继续在后台执行的命令,N 是jobs 看到的job number
- `ctrl + c` 结束前台进程
- `ps ` 查看后台运行的程序
  - 用jobs查看进程的job number，然后用命令：kill %n 来结束。
  - 用ps 查看进程的pid，然后用命令：kill pid 来结束。

------

**前台进程和后台进程的一点讨论**

       整理这篇文章的目的就是弄清楚在实际使用中这两种进程的区别。 一般情况下，我们都是通过shell 连接到linux 服务器上，那么，假如我们在这个shell 窗口执行一个备份或者其他命令，即前台命令。 在这个时候，前台命令没有执行完，我们把这个终端关闭了，那么这个命令也就会中断。 即使我们在执行命令时加了& 符号，让进程在后台执行，终端的关闭也会造成命令的结束。

**解决这个问题有两种方法：**

（1）将命令添加到crontab里，让系统自己调用。

              这种方法将使命令在服务器端执行，这样即使终端关闭，也不影响命令的执行。

（2）使用nohup命令（no hang up）。

       该命令用于保证不挂断地运行命令。如：

```
[oracle@singledb ~]$ nohup /u02/rman_incremental_backup.sh &
[1] 4409
[oracle@singledb ~]$ jobs
[1]+  Running                 nohup /u02/rman_incremental_backup.sh &
```

**这里要注意：**

       运行nohup命令后，按任意键返回shell 窗口，然后输入exit退出终端，不能直接关闭窗口，直接关闭窗口的话，还是会造成命令进程和终端一起结束。